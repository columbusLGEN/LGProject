//
//  EDJHomeViewController.m
//  HBDJProj
//
//  Created by Peanut Lee on 2018/4/2.
//  Copyright © 2018年 Lee. All rights reserved.
//

#import "EDJHomeViewController.h"
#import "EDJHomeHeaderView.h"
#import "EDJMicroPartyLessionViewController.h"
#import "EDJDigitalReadViewController.h"

@interface EDJHomeViewController ()<
EDJHomeNavDelelgate,
UITableViewDelegate,
UICollectionViewDelegate
>

@property (strong,nonatomic) EDJHomeHeaderView *header;
/** 微党课&党建要闻控制器 */
@property (strong,nonatomic) EDJMicroPartyLessionViewController *microPLViewController;
/** 数字阅读控制器 */
@property (strong,nonatomic) EDJDigitalReadViewController *digitalController;
///TODO: 建立currentSegment属性

@end

@implementation EDJHomeViewController

- (void)loadView{
    [super loadView];
    [self.navigationController setNavigationBarHidden:YES animated:NO];
}

- (void)viewDidLoad {
    [super viewDidLoad];
    
    /// 微党课 & 党建要闻
//    _microPLViewController = [EDJMicroPartyLessionViewController new];
//    _microPLViewController.tableView.delegate = self;
//    [self.view addSubview:_microPLViewController.tableView];
//
//    self.header.imgURLStrings = @[
//                             @"https://goss.vcg.com/creative/vcg/800/version23/VCG21gic13374057.jpg",
//                             @"http://dl.bizhi.sogou.com/images/2013/12/19/458657.jpg",
//                             @"https://goss3.vcg.com/creative/vcg/800/version23/VCG21gic19568254.jpg"];
//
//    [_microPLViewController.tableView addSubview:_header];
    
    /// 数字阅读
    _digitalController  = [EDJDigitalReadViewController new];
    _digitalController.collectionView.delegate = self;
    [self.view addSubview:_digitalController.collectionView];
    
  
}


#pragma mark - UIScrollViewDelegate
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    /// 控制头部在滚动时的frame
    CGFloat offsetY = scrollView.contentOffset.y;
    if (offsetY <= -[self headerHeight]) {
        /// tempView 保持原来的位置
        _header.frame = CGRectMake(0, offsetY, kScreenWidth, [self headerHeight]);
    }else{
    }
}

#pragma mark - nav delegate


/// MARK: lazy load
- (EDJHomeHeaderView *)header{
    if (_header == nil) {
        /// frame
        CGFloat headerHeight = [self headerHeight];
        CGRect headerFrame = CGRectMake(0, - headerHeight, kScreenWidth,headerHeight);
        
        /// header
        _header = [[EDJHomeHeaderView alloc] initWithFrame:headerFrame];
        _header.nav.delegate = self;
    }
    return _header;
}


- (CGFloat)headerHeight{
    return [EDJHomeHeaderView headerHeight];
}
@end
