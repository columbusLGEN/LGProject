//
//  EDJMicroPartyLessionViewController.m
//  HBDJProj
//
//  Created by Peanut Lee on 2018/4/3.
//  Copyright © 2018年 Lee. All rights reserved.
//

#import "EDJMicroPartyLessionViewController.h"
#import "EDJHomeHeaderView.h"
#import <MJRefresh.h>

static NSString * const testCell = @"testCell";

@interface EDJMicroPartyLessionViewController ()

@end

@implementation EDJMicroPartyLessionViewController

- (instancetype)init{
    if (self = [super init]) {
        _microOrBuildModels  = [NSMutableArray array];
        for (int i = 0; i < 10; i++) {
            [_microOrBuildModels addObject:@"B"];
        }
        [self.tableView reloadData];
        
        /// testcode
        self.tableView.mj_header = [MJRefreshNormalHeader headerWithRefreshingBlock:^{
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                [self.tableView.mj_header endRefreshing];
            });
        }];
        
        self.tableView.mj_footer = [MJRefreshAutoNormalFooter footerWithRefreshingBlock:^{
            for (int i = 0; i < 5; i++) {
                [_microOrBuildModels addObject:@"a"];
            }
            [_tableView reloadData];
            dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(1 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
                [self.tableView.mj_footer endRefreshing];
            });
            
        }];
        
    }
    return self;
}


#pragma mark - data source
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return _microOrBuildModels.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:testCell];
    [cell.textLabel setText:[NSString stringWithFormat:@"%@_%ld",_microOrBuildModels[indexPath.row],indexPath.row]];
    return cell;
}



- (UITableView *)tableView{
    if (_tableView == nil) {
        _tableView = [[UITableView alloc] initWithFrame:kScreenBounds style:UITableViewStylePlain];
        _tableView.contentInsetAdjustmentBehavior = UIScrollViewContentInsetAdjustmentNever;
        _tableView.dataSource = self;
        UIEdgeInsets insets = UIEdgeInsetsMake([EDJHomeHeaderView headerHeight], 0, 0, 0);
        [_tableView setContentInset:insets];
        _tableView.scrollIndicatorInsets = insets;
        [_tableView registerClass:[UITableViewCell class] forCellReuseIdentifier:testCell];
    }
    return _tableView;
}

@end
