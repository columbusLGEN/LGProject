//
//  UInfoVC.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/8/30.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UInfoVC.h"

#import "ZPickViewTool.h"
#import "ZPickDateView.h"

#import "UInfoAddressViewController.h"

@interface UInfoVC ()<UITextFieldDelegate, UIPickerViewDelegate, UIPickerViewDataSource, ZPickDateViewDelegate, ZPickViewToolDelegate>

@property (strong, nonatomic) IBOutlet UILabel *lblDescAvatar;      
@property (strong, nonatomic) IBOutlet UILabel *lblDescName;
@property (strong, nonatomic) IBOutlet UILabel *lblDescLive;
@property (strong, nonatomic) IBOutlet UILabel *lblDescSex;
@property (strong, nonatomic) IBOutlet UILabel *lblDescLanguage;
@property (strong, nonatomic) IBOutlet UILabel *lblDescCountry;
@property (strong, nonatomic) IBOutlet UILabel *lblDescLearnYears;
@property (strong, nonatomic) IBOutlet UILabel *lblDescInsterest;
@property (strong, nonatomic) IBOutlet UILabel *lblDescBirthday;

@property (strong, nonatomic) IBOutlet UIImageView *imgAvatar;

@property (strong, nonatomic) IBOutlet UITextField *txtfName;
@property (strong, nonatomic) IBOutlet UITextField *txtfAddress;
@property (strong, nonatomic) IBOutlet UITextField *txtfInterest;

@property (strong, nonatomic) IBOutlet UILabel *lblSex;
@property (strong, nonatomic) IBOutlet UILabel *lblLanguage;
@property (strong, nonatomic) IBOutlet UILabel *lblCountry;
@property (strong, nonatomic) IBOutlet UILabel *lblLearnYears;
@property (strong, nonatomic) IBOutlet UILabel *lblBirthday;
@property (strong, nonatomic) IBOutlet UIButton *btnSave;

/* 性别 */
@property (strong, nonatomic) NSArray *arrSex;
/* 语言 */
@property (strong, nonatomic) NSArray *arrLanguage;
/* 学习年数 */
@property (strong, nonatomic) NSArray *arrLearnYear;

/* 性别选择 */
@property (strong, nonatomic) ZPickViewTool *pickViewSex;

@end

@implementation UInfoVC

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    self.title = @"我的信息";
    [self configUserInfoView];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark -
#pragma mark 配置 用户信息界面

- (void)configUserInfoView
{
    _imgAvatar.layer.borderColor = [UIColor cm_whiteColor_FFFFFF_8F].CGColor;
    _imgAvatar.layer.borderWidth = 3.f;
    _imgAvatar.layer.masksToBounds = YES;
    _imgAvatar.layer.cornerRadius = _imgAvatar.height/2;
    
    _btnSave.layer.masksToBounds = YES;
    _btnSave.layer.cornerRadius = _btnSave.height/2;
    
    _btnSave.backgroundColor = [UIColor cm_purpleColor_82056B_1];
    [_btnSave setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
}

#pragma mark - UIPickerView

//- (void)configPickerViewWithTag:(NSInteger)tag
//{
//    UIPickerView *pickerView = [[UIPickerView alloc] initWithFrame:CGRectMake(0, Screen_Height, Screen_Width, 100)];
//    pickerView.backgroundColor = [UIColor whiteColor];
//    pickerView.delegate = self;
//    pickerView.dataSource = self;
//    pickerView.tag = tag;
//    [self.view.window addSubview:pickerView];
//}

- (void)configPickViewSex
{
    _pickViewSex = [[ZPickViewTool alloc] initWithFrame:CGRectMake(0, self.view.height, Screen_Width, 260) dataSource:self.arrSex selected:0];
    
    [_pickViewSex show];
}

#pragma mark -
#pragma mark UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    switch (indexPath.row) {
        case 0:
            [self camera];
            break;
        case 3:
            [self configPickViewSex];
            break;
        case 4:
            
            break;
        case 6:
//            [self configPickerViewWithTag:indexPath.row];
            break;
        case 5:
            [self toSelectCountry];
            break;
        case 8:
            [self seletcedBirthday];
            break;
        default:
            break;
    }
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    [cell setCellSeparatorInset:UIEdgeInsetsZero];
}

//#pragma mark - UIPickerViewDelegate, UIPickerViewDataSource
//
//- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
//{
//    return 1;
//}
//
//- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
//{
//    NSInteger number = 0;
//    if (pickerView.tag == 3) {
//        number = self.arrSex.count;
//    }
//    else if (pickerView.tag == 4) {
//        number = self.arrLanguage.count;
//    }
//    else if (pickerView.tag == 6) {
//        number = self.arrLearnYear.count;
//    }
//    return number;
//}
//
//- (nullable NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
//{
//    NSString *title;
//    if (pickerView.tag == 3) {
//        title = _arrSex[row];
//    }
//    else if (pickerView.tag == 4) {
//        title = _arrLanguage[row];
//    }
//    else if (pickerView.tag == 6) {
//        title = _arrLearnYear[row];
//    }
//    return title;
//}
//
//- (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
//{
//    if (pickerView.tag == 3) {
//        _lblSex.text = _arrSex[row];
//    }
//    else if (pickerView.tag == 4) {
//        _lblLanguage.text = _arrLanguage[row];
//    }
//    else if (pickerView.tag == 6) {
//        _lblLearnYears.text = _arrLearnYear[row];
//    }
//}

#pragma mark -
#pragma mark UITextFieldDelegate

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    textField.textAlignment = NSTextAlignmentLeft;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    textField.textAlignment = NSTextAlignmentRight;
}

#pragma mark -
#pragma mark ZPickDateViewDelegate

- (void)datePickerViewCancel:(ZPickDateView *)pikcer
{
    [[ZPickDateView sharedInstance] hidden];
}

- (void)datePickerView:(ZPickDateView *)pikcer selectedDate:(NSDate *)aValue
{
    [[ZPickDateView sharedInstance] hidden];
    NSString *strDate = [NSString stringWithFormat:@"%@", aValue];
    strDate = [strDate substringToIndex:10];
    _lblBirthday.text = strDate;
}

#pragma mark -
#pragma mark ZPickViewToolDelegate

- (void)ZPickViewClickCancel
{
    NSLog(@"111");
    
    [_pickViewSex hidden];
}

- (void)ZPickViewClickSureWithIndex:(NSInteger)index
{
    
}

#pragma mark -
#pragma mark action

- (IBAction)click_btnSave:(id)sender {
    [self saveUserInfo];
}


- (void)saveUserInfo {
    NSLog(@"保存信息");
}

- (void)toSelectCountry
{
    UInfoAddressViewController *addressVC = [[UInfoAddressViewController alloc] init];
    
    [self.navigationController pushViewController:addressVC animated:YES];
}

- (void)seletcedBirthday
{
    [ZPickDateView sharedInstance].delegete = self;
    [[ZPickDateView sharedInstance] show];
}

#pragma mark -
#pragma mark 拍照 

- (void)camera
{
    [self showAlertForSystemPhotoWithTitle:nil];
}

- (void)handleImgWith:(UIImage *)image
{
    _imgAvatar.image = image;
}

#pragma mark -
#pragma mark 属性

- (NSArray *)arrSex
{
    if (_arrSex == nil) {
        _arrSex = @[@"男", @"女"];
    }
    return _arrSex;
}

- (NSArray *)arrLanguage
{
    if (_arrLanguage == nil) {
        _arrLanguage = @[@"汉语", @"English"];
    }
    return _arrLanguage;
}

- (NSArray *)arrLearnYear
{
    if (_arrLearnYear == nil) {
        NSMutableArray *array = [NSMutableArray array];
        for (NSInteger i = 0; i < 100; i ++) {
            [array addObject:@(i)];
        }
        _arrLearnYear = [NSMutableArray arrayWithArray:array];
    }
    return _arrLearnYear;
}

@end
