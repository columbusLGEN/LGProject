//
//  UCRecommendManageVC.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 2017/10/11.
//  Copyright © 2017年 retech. All rights reserved.
//

#import "UCRecommendManageVC.h"

#import "ZSlideSwitch.h"

#import "UCRecommendListVC.h"
#import "UCRecommendBooksVC.h"

@interface UCRecommendManageVC ()<ZSlideSwitchDelegate>

@property (strong, nonatomic) UCRecommendListVC *recommendVC; // 推荐
@property (strong, nonatomic) UCRecommendListVC *impowerVC;   // 授权

@property (assign, nonatomic) ENUM_RecommendType recommendType; // 推荐类型

@property (strong, nonatomic) UIButton *btnL;
@property (strong, nonatomic) UIButton *btnR;

@end

@implementation UCRecommendManageVC

- (void)viewDidLoad {
    [super viewDidLoad];
    [self configRecommendManagerView];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - 配置界面

// 推荐阅读管理
- (void)configRecommendManagerView
{
    [self configNavigationBar];
    self.view.backgroundColor = [UIColor whiteColor];
    
    UIView *topView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, Screen_Width, 44)];
    topView.backgroundColor = [UIColor whiteColor];
    
    _btnL = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, Screen_Width/2 - 1, 43)];
    [_btnL setTitle:@"推荐阅读" forState:UIControlStateNormal];
    [_btnL setTitleColor:[UIColor cm_blackColor_333333_1] forState:UIControlStateNormal];
    [_btnL setTitleColor:[UIColor cm_purpleColor_82056B_1] forState:UIControlStateSelected];
    [_btnL setBackgroundColor:[UIColor clearColor]];
    [_btnL addTarget:self action:@selector(selectedRecommendView) forControlEvents:UIControlEventTouchUpInside];
    [_btnL setSelected:YES];
    
    _btnR = [[UIButton alloc] initWithFrame:CGRectMake(Screen_Width/2, 0, Screen_Width/2, 43)];
    [_btnR setTitle:@"授权阅读" forState:UIControlStateNormal];
    [_btnR setTitleColor:[UIColor cm_blackColor_333333_1] forState:UIControlStateNormal];
    [_btnR setTitleColor:[UIColor cm_purpleColor_82056B_1] forState:UIControlStateSelected];
    [_btnR setBackgroundColor:[UIColor clearColor]];
    [_btnR addTarget:self action:@selector(selectedImpowerView) forControlEvents:UIControlEventTouchUpInside];
    
    UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(Screen_Width/2 - 1, 10, .5, 24)];
    lineView.backgroundColor = [UIColor cm_lineColor_E3E3E3_1];
    
    UIView *bLineView = [[UIView alloc] initWithFrame:CGRectMake(0, topView.height - 0.5, Screen_Width, 0.5)];
    bLineView.backgroundColor = [UIColor cm_lineColor_E3E3E3_1];
    
    [topView addSubview:_btnL];
    [topView addSubview:_btnR];
    [topView addSubview:lineView];
    [topView addSubview:bLineView];
    
    [self.view addSubview:topView];
    
    [self configImpowerView];
    [self configRecommendView];
    
    _recommendType = ENUM_RecommendTypeRecommend;
}

- (void)configNavigationBar
{
    self.title = @"推荐阅读";

    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"推荐" style:UIBarButtonItemStylePlain target:self action:@selector(recommendBooks)];
}

#pragma mark - action
// 去推荐/授权
- (void)recommendBooks
{
    UCRecommendBooksVC *recommendBooks = [[UCRecommendBooksVC alloc] init];
    recommendBooks.recommendType = _recommendType;
    [self.navigationController pushViewController:recommendBooks animated:YES];
}

// 推荐
- (void)selectedRecommendView
{
    [_btnL setSelected:YES];
    [_btnR setSelected:NO];
    _recommendType = ENUM_RecommendTypeRecommend;
    [self.view bringSubviewToFront:_recommendVC.view];
}

// 授权
- (void)selectedImpowerView
{
    [_btnL setSelected:NO];
    [_btnR setSelected:YES];
    _recommendType = ENUM_RecommendTypeImpower;
    [self.view bringSubviewToFront:_impowerVC.view];
}

#pragma mark - 配置推荐授权列表
// 推荐
- (void)configRecommendView {
    _recommendVC = [UCRecommendListVC new];
    _recommendVC.recommendType = ENUM_RecommendTypeRecommend;
    _recommendVC.view.frame = CGRectMake(0, 44, Screen_Width, self.view.height - 44);
    
    [self addChildViewController:_recommendVC];
    [self.view addSubview:_recommendVC.view];
}

// 授权
- (void)configImpowerView {
    _impowerVC = [UCRecommendListVC new];
    _impowerVC.recommendType = ENUM_RecommendTypeImpower;
    _impowerVC.view.frame = CGRectMake(0, 44, Screen_Width, self.view.height - 44);
    
    [self addChildViewController:_impowerVC];
    [self.view addSubview:_impowerVC.view];
}

@end
