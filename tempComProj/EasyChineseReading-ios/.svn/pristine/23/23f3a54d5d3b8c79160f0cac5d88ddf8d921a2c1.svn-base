//
//  UOrderFooterView.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/9/4.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UserOrderFooterView.h"

@interface UserOrderFooterView ()
@property (weak, nonatomic) IBOutlet UIButton *btnRight;
@property (weak, nonatomic) IBOutlet UILabel *lblMoney;
@property (weak, nonatomic) IBOutlet UIView *viewBotLine;
@property (weak, nonatomic) IBOutlet UIView *viewTopLine;

@property (strong, nonatomic) OrderModel *order;

@end

@implementation UserOrderFooterView


- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
}

- (void)awakeFromNib
{
    [super awakeFromNib];
    [self configDefaultOrderFooterView];
}

- (void)configDefaultOrderFooterView
{
    _btnRight.layer.masksToBounds = YES;
    _btnRight.layer.cornerRadius = _btnRight.height/2;
    
    _btnRight.layer.borderWidth = 1.f;
    _btnRight.layer.borderColor = [UIColor cm_purpleColor_82056B_1].CGColor;
    _btnRight.backgroundColor = [UIColor whiteColor];
    _btnRight.tintColor = [UIColor cm_purpleColor_82056B_1];
    [_btnRight setTitle:LOCALIZATION(@"评价") forState:UIControlStateNormal];
    
    _viewTopLine.backgroundColor = [UIColor cm_lineColor_D9D7D7_1];
    _viewBotLine.backgroundColor = [UIColor cm_lineColor_D9D7D7_1];
    
    _lblMoney.textColor = [UIColor cm_orangeColor_FF5910_1];
    _lblMoney.font = [UIFont systemFontOfSize:16.f];
}

#pragma mark -
#pragma mark 数据更新


- (void)dataDidChange
{
    _order = self.data;
    NSString *string = [NSString stringWithFormat:@"%@: %@%@", LOCALIZATION(@"合计"), LOCALIZATION(@"¥"), _order.price];
    NSMutableAttributedString *money = [[NSMutableAttributedString alloc] initWithString:string];
    //获取要调整颜色的文字位置,调整颜色
    NSRange range = [[money string] rangeOfString:@" "];
    NSRange upRang = NSMakeRange(range.location, string.length - range.location - range.length + 1);
    [money addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:20.f] range:upRang];
    _lblMoney.attributedText = money;

//    if (_isDetailFooter) {
//        _viewTopLine.hidden = YES;
//    }
}

#pragma mark - action

- (IBAction)click_btnRight:(id)sender {
    OrderModel *order = self.data;
    if (order.orderStatus == ENUM_ZOrderStateScore) {
        [self evaluate];
    }
}

- (void)evaluate
{
    if ([self.delegate respondsToSelector:@selector(evaluateWithOrder:)]) {
        [self.delegate evaluateWithOrder:_order];
    }
}

@end
