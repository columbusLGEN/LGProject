//
//  ECRFullMinusRollView.m
//  downloadStateDemo
//
//  Created by Peanut Lee on 2017/9/27.
//  Copyright © 2017年 Lee. All rights reserved.
//

#import "ECRFullMinusRollView.h"
#import "ECRTopupFieldView.h"

static CGFloat  spaceA       = 8;
static CGFloat  spaceB       = 30;
static CGFloat  heightA      = 36;
static CGFloat  textFont     = 14;
static CGFloat  marginLeft   = 15;

static NSString *colors             = @"333333";
static NSString *doneTitle          = @"确定";
static NSString *onlineTitle        = @"线上卡" ;
static NSString *offlineTitle       = @"实体卡" ;
static NSString *imgName_icon_selected_no     = @"icon_selected_no";
static NSString *imgName_icon_selected     = @"icon_selected";
static NSString *textFiledTestTitle = @"go to sky,side by side with sunshine";

@interface ECRFullMinusRollView ()

@property (strong,nonatomic) UILabel            *text_online;      //
@property (strong,nonatomic) UILabel            *text_offline;     //
@property (strong,nonatomic) UIButton           *button_online;    //
@property (strong,nonatomic) UIButton           *button_offline;   //
@property (strong,nonatomic) UIImageView        *icon_online;      //
@property (strong,nonatomic) UIImageView        *icon_offline;     //

@property (strong,nonatomic) ECRTopupFieldView  *topupView;        //

@end

@implementation ECRFullMinusRollView

- (void)textDependsLauguage{
    doneTitle = [LGPChangeLanguage localizedStringForKey:@"确定"];
    onlineTitle = [LGPChangeLanguage localizedStringForKey:@"线上卡"];
    offlineTitle = [LGPChangeLanguage localizedStringForKey:@"实体卡"];
}

- (void)onOffLineSwitch:(UIButton *)sender{
    switch (sender.tag) {
        case 101:{
            // online
            [_icon_online   setImage:[UIImage imageNamed:imgName_icon_selected]];
            [_icon_offline  setImage:[UIImage imageNamed:imgName_icon_selected_no]];
            self.tableView .hidden = NO;
            self.topupView.hidden  = YES;
        }
            break;
            
        case 102:{
            // offline
            [_icon_online   setImage:[UIImage imageNamed:imgName_icon_selected_no]];
            [_icon_offline  setImage:[UIImage imageNamed:imgName_icon_selected]];
            self.tableView .hidden = YES;
            self.topupView.hidden = NO;
        }
            break;
    }
}

- (void)setupUI{
    [self addSubview:self.tableView];
    [self addSubview:self.topupView];
    [self addSubview:self.text_online];
    [self addSubview:self.icon_online];
    [self addSubview:self.text_offline];
    [self addSubview:self.icon_offline];
    [self addSubview:self.button_online];
    [self addSubview:self.button_offline];

    [self.icon_online mas_makeConstraints:^(MASConstraintMaker *make) {
        make.top .equalTo(self.mas_top);
        make.left.equalTo(self.mas_left).offset(marginLeft);
    }];
    [self.text_online mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.equalTo(self.icon_online.mas_centerY);
        make.left   .equalTo(self.icon_online.mas_right) .offset(spaceA);
    }];
    [self.icon_offline mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.equalTo(self.icon_online.mas_centerY);
        make.left   .equalTo(self.text_online.mas_right) .offset(spaceB);
    }];
    [self.text_offline mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.equalTo(self.icon_online.mas_centerY);
        make.left   .equalTo(self.icon_offline.mas_right).offset(spaceA);
    }];
    [self.button_online mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.equalTo(self.icon_online.mas_centerY);
        make.left   .equalTo(self.icon_online.mas_left);
        make.right  .equalTo(self.text_online.mas_right);
    }];
    [self.button_offline mas_makeConstraints:^(MASConstraintMaker *make) {
        make.centerY.equalTo(self.icon_online.mas_centerY);
        make.left   .equalTo(self.icon_offline.mas_left);
        make.right  .equalTo(self.text_offline.mas_right);
    }];
    [self.tableView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.top    .equalTo(self.button_online.mas_bottom).offset(spaceA);
        make.left   .equalTo(self.mas_left);
        make.right  .equalTo(self.mas_right);
        make.bottom .equalTo(self.mas_bottom);
    }];
    [self.topupView mas_makeConstraints:^(MASConstraintMaker *make) {
        make.top    .equalTo(self.button_online.mas_bottom);
        make.left   .equalTo(self.mas_left);
        make.right  .equalTo(self.mas_right);
        make.height .equalTo(@(heightA));
    }];
    
    self.topupView.hidden = YES;
    [self textDependsLauguage];

}

- (instancetype)initWithFrame:(CGRect)frame{
    if (self = [super initWithFrame:frame]) {
        [self setupUI];
    }
    return self;
}

- (instancetype)initWithCoder:(NSCoder *)aDecoder{
    if (self = [super initWithCoder:aDecoder]) {
        [self setupUI];
    }
    return self;
}
- (UIImageView *)icon_online{
    if (_icon_online == nil) {
        _icon_online = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imgName_icon_selected]];
    }
    return _icon_online;
}
- (UILabel *)text_online{
    if (_text_online == nil) {
        _text_online = [[UILabel alloc] init];
        [_text_online setText:onlineTitle];
        [_text_online setFont:[UIFont systemFontOfSize:textFont]];
        [_text_online setTextColor:[UIColor colorWithHexString:colors]];
    }
    return _text_online;
}
- (UIImageView *)icon_offline{
    if (_icon_offline == nil) {
        _icon_offline = [[UIImageView alloc] initWithImage:[UIImage imageNamed:imgName_icon_selected_no]];
    }
    return _icon_offline;
}
- (UILabel *)text_offline{
    if (_text_offline == nil) {
        _text_offline = [[UILabel alloc] init];
        [_text_offline setText:offlineTitle];
        [_text_offline setFont:[UIFont systemFontOfSize:textFont]];
        [_text_offline setTextColor:[UIColor colorWithHexString:colors]];
    }
    return _text_offline;
}
- (UIButton *)button_online{
    if (_button_online == nil) {
        _button_online = [[UIButton alloc] init];
        _button_online.tag = 101;
        [_button_online addTarget:self
                           action:@selector(onOffLineSwitch:)
                 forControlEvents:UIControlEventTouchUpInside];
    }
    return _button_online;
}
- (UIButton *)button_offline{
    if (_button_offline == nil) {
        _button_offline = [[UIButton alloc] init];
        _button_offline.tag = 102;
        [_button_offline addTarget:self
                            action:@selector(onOffLineSwitch:)
                  forControlEvents:UIControlEventTouchUpInside];
    }
    return _button_offline;
}
- (UITableView *)tableView{
    if (_tableView == nil) {
        _tableView = [[UITableView alloc] initWithFrame:CGRectZero
                                                  style:UITableViewStylePlain];
        _tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    }
    return _tableView;
}
- (ECRTopupFieldView *)topupView{
    if (_topupView == nil) {
        _topupView = [[ECRTopupFieldView alloc] init];
        _topupView.textFieldTitle_test  = textFiledTestTitle;
        _topupView.textFontSize         = textFont;
        _topupView.buttonTitle          = doneTitle;
    }
    return _topupView;
}

@end




