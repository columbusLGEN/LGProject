<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,shrink-to-fit=no"/>
    <meta name="apple-mobile-web-app-capable" content="yes"/>
	<link href="../Styles/Style0001.css" rel="stylesheet" type="text/css"/>

     <style>
        
        #russia {
            position: absolute;
            display: block;
            width: 60px;
            height: 60px;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);/* iOS 8 need */
            transform: translate(-50%, -50%);
            background-color: rgba(0,0,255, 0.0);
        }
        #russia div {
            display: block;position: absolute;
            width: 26px; height: 26px;
            border: 2px solid rgba(0, 0, 0, 0.6);
            outline: 3px solid deeppink;
            outline-offset: -5px;
            /*border-radius: 2px;*/
            /*-webkit-border-radius: 2px;*/
            top: 50%;
            left: 50%;
        }
        #toolBox {
            position: absolute;
            bottom: 50px;
            left: 50%;
            -webkit-transform: translate(-50%, 0);/* iOS 8 need */
            transform: translate(-50%, 0);
        }
       #toolBox button {
           width: 90px;
           height: 44px;
           background-color: #cccccc;
           font-size: 18px;
           border-color: #666666;
           border-style: solid;
           border-radius: 5px;
           border-width: 1px;
           text-align: center;
       }
    </style>
<title></title>
</head>
<body>
<div id="Container">
<div id="russia">
    <div id="box0"></div>
    <div id="box1"></div>
    <div id="box2"></div>
    <div id="box3"></div>
</div>
    <div id="toolBox">
        <button onclick="preTap()"> &lt; 退 </button>
        <button onclick="nextTap()"> 进 &gt; </button>
    </div>
</div>
<script type="application/javascript" src="../Misc/velocity.min.js"></script>
<script type="text/javascript">
    var box0 = document.getElementById('box0');
    var box1 = document.getElementById('box1');
    var box2 = document.getElementById('box2');
    var box3 = document.getElementById('box3');
    // 外框色,内框色
    var colors = [        ['#c53124', '#e33c26'],
        ['#cd6224','#e96d2a'],
        ['#f2c340', '#f1e94f'],
        ['#5d4c99', '#79599f'],
        ['#38ac40', '#63b443']];

    function setTransform(element,  positionX, positionY, typeIndex) {
        var styleItem = colors[typeIndex];
        element.style.webkitTransition = '-webkit-transform 300ms cubic-bezier(0.33, 0.66, 0.66, 1)';
        element.style.webkitTransform = 'translate3d(' + positionX + ', ' + positionY + ', 0)';
        Velocity(element, {backgroundColor: styleItem[1]}, 300);
        element.style.outlineColor = styleItem[0];
    }
    // 四方
    function russiaState0() {
        setTransform(box0, '-100%', '-100%', 0);
        setTransform(box1, '-100%', '0%', 0);
        setTransform(box2, '0%', '-100%', 0);
        setTransform(box3, '0%', '0%', 0);
    }
    // 垂直线
    function russiaState1() {
        setTransform(box0, '-50%', '-200%', 1);
        setTransform(box1, '-50%', '-100%', 1);
        setTransform(box2, '-50%', '0%', 1);
        setTransform(box3, '-50%', '100%', 1);
    }
    // 右突
    function russiaState2() {
        setTransform(box0, '-75%', '-150%', 2);
        setTransform(box1, '-75%', '-50%', 2);
        setTransform(box2, '-75%', '50%', 2);
        setTransform(box3, '25%', '-50%', 2);
    }
    // 下扑再绕 Y 旋转 180 度
    function russiaState3() {
        setTransform(box0, '-150%', '-100%', 3);
        setTransform(box1, '-50%', '-100%', 3);
        setTransform(box2, '50%', '-100%', 3);
        setTransform(box3, '50%', '0%', 3);
    }
    // 方块上行左移半格下行右移半格
    function russiaState4() {
        setTransform(box0, '-150%', '-100%', 4);
        setTransform(box1, '-50%', '0%', 4);
        setTransform(box2, '-50%', '-100%', 4);
        setTransform(box3, '50%', '0%', 4);
    }
    
    var index = 0;
    var funcs = [russiaState0, russiaState1, russiaState2, russiaState3];

    function enterFrame() {
        setTimeout(function() {
            var func = funcs[index];
            func();
            index ++;
            if (index > 3) {
                index = 0
            }
            enterFrame();
        }, 1000);
    }
//    enterFrame();

    russiaState0();

    function preTap() {
        index --;
        if (index < 0) {
            index = 3
        }
        var func = funcs[index];
        func();
    }

    function nextTap() {
        index ++;
        if (index > 3) {
            index = 0
        }
        var func = funcs[index];
        func();
    }

</script>
</body>
</html>