//
//  ClassRequest.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 2017/9/18.
//  Copyright © 2017年 retech. All rights reserved.
//

#import "ClassRequest.h"

@implementation ClassRequest

CM_SINGLETON_IMPLEMENTION(ClassRequest)


#pragma mark - 查看班级接口

/**
 查看班级接口
 
 @param completion 回调
 */
- (void)getClassesWithCompletion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId": [NSString stringWithFormat: @"%ld", self.user.userId],},
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"viewClass/viewClass"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

#pragma mark - 查看阅读进度

/**
 查看班级阅读进度
 
 @param classId     班级id
 @param completion  回调
 */
- (void)getReadingProgressWithClassId:(NSString *)classId
                           completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"    : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"classId"   : classId,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/readingProgress"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

/**
 查询学生的阅读进度
 
 @param studentId  学生id
 @param completion 回调
 */
- (void)getReadingProgressWithStudentId:(NSString *)studentId
                             completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"    : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"studentId" : studentId,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/readingProgress"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

#pragma mark - 班级管理

/**
 添加或修改班级信息
 
 @param type        修改类型：1：新增 2：修改
 @param school      学校名
 @param address     地址
 @param classId     班级id
 @param className   班级名
 @param synopsis    简介
 @param studentNum  学生人数
 @param completion  回调
 */
- (void)updateClassInfoWithType:(NSString *)type
                         school:(NSString *)school
                        address:(NSString *)address
                        classId:(NSString *)classId
                      className:(NSString *)className
                     studentNum:(NSString *)studentNum
                       synopsis:(NSString *)synopsis
                     completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"    : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"type"      : type,
                                       @"school"    : school,
                                       @"address"   : address,
                                       @"classId"   : classId,
                                       @"className" : className,
                                       @"synopsis"  : synopsis,
                                       @"studentNum": studentNum,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"viewClass/classInformation"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}
//
///**
// 删除班级
//
// @param classId    班级id
// @param completion 回调
// */
//- (void)deleteClassWithClassId:(NSString *)classId
//                    completion:(CompleteBlock)completion
//{
////    NSDictionary *dic = @{@"params": @{@"userId": [NSString stringWithFormat: @"%ld", self.user.userId],},
////                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
////    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
////                                    strUrl:@"viewClass/classInformation"
////                                parameters:dic
////                             completeBlock:^(id responseObject, ErrorModel *error) {
////                                 if (error) {
////                                     completion(nil, error);
////                                 }
////                                 else {
////
////                                     completion(responseObject, nil);
////                                 }
////                             }];
//}

#pragma mark - 获取学生列表接口

/**
 获取学生列表
 
 @param classId    班级id
 @param completion 回调
 */
- (void)getStudentsWithClassId:(NSString *)classId
                    completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId" : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"classId": classId,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/selectStudent"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

/**
 获取单个学生信息
 
 @param studentId  学生id
 @param completion 回调
 */
- (void)getStudentInfoWithStudentId:(NSString *)studentId
                         completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"   : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"studentId": studentId,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/selectStudent"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

#pragma mark - 学生管理接口

/**
 学生管理接口
 
 @param classId     班级id
 @param name        学生姓名
 @param age         年龄
 @param user        账号（手机号或邮箱）
 @param password    密码
 @param sex         性别
 @param type        类别(1 新增 2 修改 3 删除)
 @param completion  回调
 */
- (void)addStudentInfoWithClassId:(NSString *)classId
                             name:(NSString *)name
                              age:(NSString *)age
                             user:(NSString *)user
                         password:(NSString *)password
                              sex:(NSString *)sex
                             type:(NSString *)type
                       completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"  : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"classId" : classId,
                                       @"name"    : name,
                                       @"age"     : age,
                                       @"user"    : user,
                                       @"password": password,
                                       @"sex"     : sex,
                                       @"type"    : type,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/studentManagement"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {

                                     completion(responseObject, nil);
                                 }
                             }];
}


///**
// 更新学生信息
//
// @param classId    班级id
// @param studentId  学生id
// @param completion 回调
// */
//- (void)updateStudentWithClassId:(NSString *)classId
//                       studentId:(NSString *)studentId
//                      completion:(CompleteBlock)completion
//{
////    NSDictionary *dic = @{@"params": @{@"userId": [NSString stringWithFormat: @"%ld", self.user.userId],},
////                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
////    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
////                                    strUrl:@"user/personalInformation"
////                                parameters:dic
////                             completeBlock:^(id responseObject, ErrorModel *error) {
////                                 if (error) {
////                                     completion(nil, error);
////                                 }
////                                 else {
////
////                                     completion(responseObject, nil);
////                                 }
////                             }];
//}

#pragma mark - 发送站内信

/**
 发送站内信
 
 @param type        ？
 @param message     信息内容
 @param studentId   学生id
 @param completion  回调
 */
- (void)setMessageWithType:(NSString *)type
                   message:(NSString *)message
                 studentId:(NSString *)studentId
                completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"   : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"type"     : type,
                                       @"message"  : message,
                                       @"studentId": studentId,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"user/personalInformation"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     completion(responseObject, nil);
                                 }
                             }];
}

#pragma mark - 教师推荐图书给学生

/**
 教师推荐图书给学生
 
 @param shareTitle 分享的标题
 @param bookIds    图书 id 数组
 @param studentIds 学生 id 数组
 @param shareTime  分享的时间
 @param completion 回调
 */
- (void)recommendBooksWithShareTitle:(NSString *)shareTitle
                             bookIds:(NSArray *)bookIds
                          studentIds:(NSArray *)studentIds
                           shareTime:(NSString *)shareTime
                          completion:(CompleteBlock)completion
{
    NSDictionary *dic = @{@"params": @{@"userId"    : [NSString stringWithFormat: @"%ld", self.user.userId],
                                       @"shareTitle": shareTitle,
                                       @"bookId"    : [bookIds mj_JSONString],
                                       @"studentId" : [studentIds mj_JSONString],
                                       @"shareTime" : shareTime,
                                       },
                          @"md5"   : @"654c01acaf40e0ce6d841a552fd3b96c"};
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost
                                    strUrl:@"student/teacherShare"
                                parameters:dic
                             completeBlock:^(id responseObject, ErrorModel *error) {
                                 if (error) {
                                     completion(nil, error);
                                 }
                                 else {
                                     
                                     completion(responseObject, nil);
                                 }
                             }];
}

@end
