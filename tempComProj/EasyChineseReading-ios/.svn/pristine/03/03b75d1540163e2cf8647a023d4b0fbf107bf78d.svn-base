//
//  UClassVC.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/8/30.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UserClassVC.h"

#import "UClassTableViewCell.h"
#import "EmptyView.h"


#import "UClassManagerVC.h"
#import "UClassMessageVC.h"
#import "UCRecommendListVC.h"
#import "UCStudentManagerVC.h"
#import "UCReadDetailVC.h"

@interface UserClassVC ()<UITableViewDataSource, UITableViewDelegate>

@property (strong, nonatomic) IBOutlet UITableView *tableView;
@property (strong, nonatomic) IBOutlet UILabel *lblDesc;
@property (strong, nonatomic) IBOutlet UIView *verLine;
/* 班级 */
@property (strong, nonatomic) IBOutlet UIView *classManageView;     // 班级管理
@property (strong, nonatomic) IBOutlet UIView *studentManageView;   // 学生管理
@property (strong, nonatomic) IBOutlet UIView *recommendManageView; // 推荐阅读
@property (strong, nonatomic) IBOutlet UIView *messageManageView;   // 站内信

@property (strong, nonatomic) IBOutlet UILabel *lblClassMange;
@property (strong, nonatomic) IBOutlet UILabel *lblStudentManage;
@property (strong, nonatomic) IBOutlet UILabel *lblRecommendManage;
@property (strong, nonatomic) IBOutlet UILabel *lblMessageManage;

@property (strong, nonatomic) IBOutlet UIImageView *imgBook0;
@property (strong, nonatomic) IBOutlet UIImageView *imgBook1;
@property (strong, nonatomic) IBOutlet UIImageView *imgBook2;
@property (strong, nonatomic) IBOutlet UIImageView *imgBook3;

@property (strong, nonatomic) IBOutlet UILabel *lblBookName0;
@property (strong, nonatomic) IBOutlet UILabel *lblBookName1;
@property (strong, nonatomic) IBOutlet UILabel *lblBookName2;
@property (strong, nonatomic) IBOutlet UILabel *lblBookName3;

@property (strong, nonatomic) IBOutlet UILabel *lblBookMoney0;
@property (strong, nonatomic) IBOutlet UILabel *lblBookMoney1;
@property (strong, nonatomic) IBOutlet UILabel *lblBookMoney2;
@property (strong, nonatomic) IBOutlet UILabel *lblBookMoney3;

@property (strong, nonatomic) IBOutlet UIView *viewBook0;
@property (strong, nonatomic) IBOutlet UIView *viewBook1;
@property (strong, nonatomic) IBOutlet UIView *viewBook2;
@property (strong, nonatomic) IBOutlet UIView *viewBook3;

@property (strong, nonatomic) NSArray *arrClasses;

@property (nonatomic, strong) EmptyView *emptyView; // 没有班级

@end

@implementation UserClassVC

- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    [self configClassView];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)configClassView
{
    self.title = @"我的班级";
    _verLine.backgroundColor = [UIColor cm_purpleColor_82056B_1];
    
    if (_arrClasses.count == 0) {
        _emptyView = [EmptyView loadFromNibWithFrame:CGRectMake(0, 120, Screen_Width, _tableView.height)];
        [_emptyView updateEmptyViewWithImage: [UIImage imageNamed:@"zan9"] desc:@"没有班级" subDesc:@""];
//        [self.view addSubview:empty];
    }
    [self configTableView];
    [self addGesture];
    
}

- (void)configTableView
{
    [self.tableView registerNib:[UINib nibWithNibName:NSStringFromClass([UClassTableViewCell class]) bundle:nil] forCellReuseIdentifier:NSStringFromClass([UClassTableViewCell class])];
    
    UIView *view = [UIView new];
    view.backgroundColor = [UIColor whiteColor];
    self.tableView.tableFooterView = view;
    
    self.tableView.rowHeight = UITableViewAutomaticDimension;
    self.tableView.estimatedRowHeight = 100.f;
}

- (void)addGesture
{
    UITapGestureRecognizer *tapClassManage = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(classManage)];
    UITapGestureRecognizer *tapStudeManage = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(studentMange)];
    UITapGestureRecognizer *tapRecomManage = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(recommendManage)];
    UITapGestureRecognizer *tapMessaManage = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(messageManage)];
    UITapGestureRecognizer *tapRecommend0  = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(recommend0)];
    UITapGestureRecognizer *tapRecommend1  = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(recommend1)];
    UITapGestureRecognizer *tapRecommend2  = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(recommend2)];
    UITapGestureRecognizer *tapRecommend3  = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(recommend3)];

    [_classManageView addGestureRecognizer:tapClassManage];
    [_studentManageView addGestureRecognizer:tapStudeManage];
    [_recommendManageView addGestureRecognizer:tapRecomManage];
    [_messageManageView addGestureRecognizer:tapMessaManage];
    
    [_viewBook0 addGestureRecognizer:tapRecommend0];
    [_viewBook1 addGestureRecognizer:tapRecommend1];
    [_viewBook2 addGestureRecognizer:tapRecommend2];
    [_viewBook3 addGestureRecognizer:tapRecommend3];
}

#pragma mark -
#pragma mark UITableViewDataSource

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return self.arrClasses.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UClassTableViewCell *classCell = [tableView dequeueReusableCellWithIdentifier:NSStringFromClass([UClassTableViewCell class])];
    classCell.data = _arrClasses[indexPath.row];
    return classCell;
}

#pragma mark -
#pragma mark UITableViewDelegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (_arrClasses.count > 0 && 0 == indexPath.section) {
        [tableView deselectRowAtIndexPath:indexPath animated:YES];
        UCReadDetailVC *readDetail = [[UCReadDetailVC alloc] init];
        [self.navigationController pushViewController:readDetail animated:YES];
    }
}

#pragma mark -
#pragma mark action

- (void)classManage
{
    [self pushToViewControllerWithClassName:NSStringFromClass([UClassManagerVC class])];
}

- (void)studentMange
{
    [self pushToViewControllerWithClassName:NSStringFromClass([UCStudentManagerVC class])];
}

- (void)recommendManage
{
    [self pushToViewControllerWithClassName:NSStringFromClass([UCRecommendListVC class])];
}

- (void)messageManage
{
    [self pushToViewControllerWithClassName:NSStringFromClass([UClassMessageVC class])];
}

- (void)recommend0
{}

- (void)recommend1
{}

- (void)recommend2
{}

- (void)recommend3
{}

#pragma mark -
#pragma mark 属性
- (NSArray *)arrClasses
{
    if (_arrClasses == nil) {
        _arrClasses = @[@{@"image": @"1", @"name": @"禁区班", @"number": @"12"},
                        @{@"image": @"1", @"name": @"鲁班", @"number": @"2"},
                        @{@"image": @"1", @"name": @"什么班", @"number": @"1"},];
    }
    return _arrClasses;
}
@end
