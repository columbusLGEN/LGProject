//
//  ECRSortTableViewController.m
//  EasyChineseReading-ios
//
//  Created by lee on 2017/8/30.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "ECRSortTableViewController.h"
#import "ECRHomeSortModel.h"
#import "ECRSortTableViewCell.h"
#import "UIImage+LEEImageExtension.h"
#import "ECRClassSortModel.h"

@interface ECRSortTableViewController ()<
ECRSortTableViewCellDelegate
>

@end

@implementation ECRSortTableViewController

static NSString *reuserID = @"ECRSortTableViewCell";
static CGFloat sortCellH = 40;//MARK: 筛选条件行高

- (void)viewDidLoad {
    [super viewDidLoad];
    [self setupUI];
}

- (void)setupUI{
    [self.tableView registerClass:[ECRSortTableViewCell class] forCellReuseIdentifier:reuserID];
    self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    self.tableView.scrollEnabled = NO;
}

- (void)setModelArray:(NSArray *)modelArray{
    _modelArray = modelArray;
    
    [self.tableView reloadData];
}

#pragma mark - ECRSortTableViewCellDelegate
- (void)stbCell:(ECRSortTableViewCell *)cell classModel:(ECRClassSortModel *)classModel{
    // MARK: 收到点击筛选条件的代理通知
    if (classModel.lg_isSwitch) {// 需要切换分类
        // 根据classType 切换
//        NSLog(@"switch:%d",classModel.lg_isSwitch);
        if ([self.delegate respondsToSelector:@selector(stbController:classModel:)]) {
            [self.delegate stbController:self classModel:classModel];
        }
    }

    [self.tableView reloadData];
}

#pragma mark - Table view data source
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return _modelArray.count ? _modelArray.count : 0;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    ECRSortTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:reuserID forIndexPath:indexPath];
    cell.bookListType = self.bookListType;
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
    cell.delegate = self;
    ECRHomeSortModel *model;
    if (self.modelArray) {
        model = self.modelArray[indexPath.row];
    }
    cell.model = model;
    return cell;
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return sortCellH;
}


@end

















