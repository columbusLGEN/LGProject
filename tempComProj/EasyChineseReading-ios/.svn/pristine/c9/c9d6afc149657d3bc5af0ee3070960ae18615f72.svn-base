//
//  OrderRequest.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/9/4.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "OrderRequest.h"

@interface OrderRequest ()

/* 订单数组 */
@property (strong, nonatomic) NSArray *arrOrders;

@end

@implementation OrderRequest

CM_SINGLETON_IMPLEMENTION(OrderRequest)

/**
 获取订单列表

 @param page 页数
 @param completion 订单列表、error
 */
- (void)getOrderListWithPage:(NSInteger)page state:(NSInteger)state completion:(CompleteBlock)completion;
{
    NSDictionary *dic = @{@"params":
                              @{@"length": @"6",
                                @"page"  : @"0"},
                          @"md5": @"654c01acaf40e0ce6d841a552fd3b96c"};
    
    [ZNetworkRequest requestWithHttpMethod:ENUM_ZHttpRequestMethodPost strUrl:@"order/queryOrders" parameters:dic completeBlock:^(id responseObject, ErrorModel *error) {
        if ( error )
        {
            completion(nil,error);
        }
        else
        {
            NSArray *list = @[];
//            if ([responseObject isKindOfClass:[NSDictionary class]]) {
//                list = [[[responseObject objectForKey:@"returnJson"] mj_JSONObject] objectForKey:@"resData"];
//            }
            list = responseObject;
            NSMutableArray *arr = [NSMutableArray arrayWithArray:_arrOrders];
            [arr addObjectsFromArray:list];
            _arrOrders = arr;
            
            completion(_arrOrders, nil);
        }
    }];
}

@end
