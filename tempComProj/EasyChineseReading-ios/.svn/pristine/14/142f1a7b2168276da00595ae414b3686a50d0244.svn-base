//
//  UFavouriteTableViewCell.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/8/31.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UFavouriteTableViewCell.h"

@interface UFavouriteTableViewCell ()

@property (weak, nonatomic) IBOutlet UILabel *lblBookName;          // 书名
@property (weak, nonatomic) IBOutlet UILabel *lblAuthor;            // 作者
@property (weak, nonatomic) IBOutlet UILabel *lblFavouriteNumber;   // 收藏的数量
@property (weak, nonatomic) IBOutlet UILabel *lblFavouriteTime;     // 收藏的时间
@property (weak, nonatomic) IBOutlet UILabel *lblMoney;             // 价格

@property (weak, nonatomic) IBOutlet UIImageView *imgBookCover;     // 封面
@property (weak, nonatomic) IBOutlet UIImageView *imgSelected;      // 选择

@property (weak, nonatomic) IBOutlet UIButton *btnShopCar;          // 购物车
@property (weak, nonatomic) IBOutlet UIButton *btnShare;            // 分享

/** 图书属性 */
@property (nonatomic, strong) BookModel *book;

@end

@implementation UFavouriteTableViewCell

- (void)awakeFromNib {
    [super awakeFromNib];
    [self configFavouriteView];
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)configFavouriteView
{
    _lblBookName.textColor          = [UIColor cm_blackColor_333333_1];
    _lblAuthor.textColor            = [UIColor cm_blackColor_333333_1];
    _lblFavouriteTime.textColor     = [UIColor cm_blackColor_333333_1];
    _lblFavouriteNumber.textColor   = [UIColor cm_blackColor_333333_1];
    _lblMoney.textColor             = [UIColor cm_orangeColor_FF6000_1];
    
    _lblBookName.font           = [UIFont systemFontOfSize:16.f];
    _lblFavouriteNumber.font    = [UIFont systemFontOfSize:12.f];
    _lblAuthor.font             = [UIFont systemFontOfSize:12.f];
    _lblFavouriteTime.font      = [UIFont systemFontOfSize:12.f];
    _lblMoney.font              = [UIFont systemFontOfSize:12.f];
}

- (void)dataDidChange
{
    _book = self.data;
    
    _lblBookName.text           = [NSString stringWithFormat:@"%@", _book.NAME];
    _lblAuthor.text             = [NSString stringWithFormat:@"作者：%@", _book.author];
    _lblFavouriteTime.text      = [NSString stringWithFormat:@"收藏时间：%@", [_book.date substringToIndex:10]];
    
    NSMutableAttributedString *price = [[NSMutableAttributedString alloc] initWithString:[NSString stringWithFormat:@"￥%ld", (long)_book.price]];
    NSRange upRange = NSMakeRange(1, price.length - 1);
    [price addAttribute:NSFontAttributeName value:[UIFont systemFontOfSize:16.f] range:upRange];
    _lblMoney.attributedText = price;

    _lblFavouriteNumber.text    = [NSString stringWithFormat:@"收藏人气：%ld人", _book.favoriteNum];
    [_imgBookCover sd_setImageWithURL:[NSURL URLWithString:_book.coverPhoto] placeholderImage:[UIImage imageNamed:@"bys_9"]];
}

- (IBAction)click_btnShare:(id)sender {
    if ([self.delegate respondsToSelector:@selector(shareWithBook:)]) {
        [self.delegate shareWithBook:_book];
    }
}

- (IBAction)click_btnShopCar:(id)sender {
    if ([self.delegate respondsToSelector:@selector(addToShopCarWithBook:)]) {
        [self.delegate addToShopCarWithBook:_book];
    }
}

@end
