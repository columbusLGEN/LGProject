//
//  UCRBooksSelectedView.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 2017/9/15.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UCRBooksSelectedView.h"

#import "UCRBooksSelectedTableViewCell.h"
#import "UCRecommendBooksVC.h"

@interface UCRBooksSelectedView ()<UITableViewDelegate, UITableViewDataSource, UCRBooksSelectedTableViewCellDelegate>

@end

@implementation UCRBooksSelectedView

#pragma mark - 初始化

- (instancetype)initWithFrame:(CGRect)frame withObjects:(NSMutableArray *)objects{
    
    return [self initWithFrame:frame withObjects:objects canReorder:NO];
}

- (instancetype)initWithFrame:(CGRect)frame withObjects:(NSMutableArray *)objects canReorder:(BOOL)reOrder{
    
    self = [super initWithFrame:frame];
    
    if (self) {
        
        self.objects = [NSMutableArray arrayWithArray:objects];
        [self configBooksSelectedView];
    }
    return self;
}

#pragma mark - 配置界面

- (void)configBooksSelectedView
{
    self.backgroundColor = [[UIColor whiteColor] colorWithAlphaComponent:0.7];
    _tableView = [[UITableView alloc] initWithFrame:self.bounds];
    _tableView.delegate = self;
    _tableView.dataSource = self;
    _tableView.bounces = NO;
    _tableView.showsHorizontalScrollIndicator = NO;
    _tableView.showsVerticalScrollIndicator = NO;
    _tableView.backgroundColor = [UIColor clearColor];
    [self addSubview:_tableView];
    
    [_tableView registerNib:[UINib nibWithNibName:NSStringFromClass([UCRBooksSelectedTableViewCell class]) bundle:nil]
     forCellReuseIdentifier:NSStringFromClass([UCRBooksSelectedTableViewCell class])];
}

#pragma mark - UITableViewDelegate

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.objects count];
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    
    return 50;
}

#pragma mark - UITableViewDataSource

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    
    UCRBooksSelectedTableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:NSStringFromClass([UCRBooksSelectedTableViewCell class]) forIndexPath:indexPath];
    
    cell.delegate = self;
    cell.data = [self.objects objectAtIndex:indexPath.row];
    
    return cell;
}

#pragma mark - 

- (void)removeSelectedBook:(id)book
{
    [[NSNotificationCenter defaultCenter] postNotificationName:kNotificationRemoveSelectedBook object:book userInfo:nil];
}

@end
