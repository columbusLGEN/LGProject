//
//  ECRRentSeriousViewController.m
//  EasyChineseReading-ios
//
//  Created by Peanut Lee on 2017/10/9.
//  Copyright © 2017年 retech. All rights reserved.
//

#import "ECRRentSeriousViewController.h"
#import "ECRRentReadController.h"
#import "ECRMoreBooksCell.h"
#import "ECRBookListModel.h"

static CGFloat  listCellH = 150;// 图示列表cell高度
static NSString *cellID = @"ECRMoreBooksCell";

@interface ECRRentSeriousViewController ()<
UITableViewDelegate,
UITableViewDataSource
>
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) IBOutlet UIButton *doneButton;
@property (strong,nonatomic) NSArray *array;//


@end

@implementation ECRRentSeriousViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    [self  setupUI];
    [self  loadNewData];
}

- (void)loadNewData{
    // test
    NSInteger count = arc4random_uniform(20) + 10;
    NSMutableArray *arrM = [NSMutableArray arrayWithCapacity:10];
    for (NSInteger i = 0; i < count; ++i) {
        ECRBookListModel *model = [[ECRBookListModel alloc] init];
        //        model.iconUrl = @"http://img3m0.ddimg.cn/15/25/25112850-1_u_8.jpg";
        model.bookName = [NSString stringWithFormat:@"测试%ld",i];
        model.author = @"海明威";
        model.synopsis = @"哈哈哈哈哈或或或或或或或或或或或或或或或或或或或或或或或或或或或或或哈哈哈哈哈或或或或或或或或或或或或或或或或或或或或或或或或或或或或或";
        model.money = arc4random_uniform(100) + arc4random_uniform(100) * 0.01;
        
        [arrM addObject:model];
    }
    _array = arrM.copy;
//    [self.tableView.mj_header endRefreshing];
    [self.tableView reloadData];
}

- (void)setupUI{
    self.title = @"系列包月";
    [self.tableView registerNib:[UINib nibWithNibName:cellID bundle:nil] forCellReuseIdentifier:cellID];
    self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;
}

- (IBAction)doneButtonClick:(UIButton *)sender{
    ECRRentReadController *rrvc = [[ECRRentReadController alloc] init];
    rrvc.viewControllerPushWay = ECRBaseControllerPushWayPush;
    [self.navigationController pushViewController:rrvc animated:YES];
}

#pragma mark - UITableViewDataSource
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return _array.count;
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    ECRBookListModel *model = _array[indexPath.row];
    ECRMoreBooksCell *cell = [tableView dequeueReusableCellWithIdentifier:cellID];
    
    cell.model = model;
    return cell;
}
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return listCellH;
}
#pragma mark - UITableViewDelegate
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    
}

@end
