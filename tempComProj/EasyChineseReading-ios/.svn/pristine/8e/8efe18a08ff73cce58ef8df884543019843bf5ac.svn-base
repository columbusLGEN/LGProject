//
//  ECRBookClassSortHeader.m
//  EasyChineseReading-ios
//
//  Created by lee on 2017/9/2.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "ECRBookClassSortHeader.h"
#import "ECRBookSortButtonView.h"
#import "ECRSortTableViewController.h"

@interface ECRBookClassSortHeader ()<ECRBookSortButtonViewDelegate>
@property (weak, nonatomic) IBOutlet ECRBookSortButtonView *sale;// 销量
@property (weak, nonatomic) IBOutlet ECRBookSortButtonView *price;// 价格
@property (weak, nonatomic) IBOutlet ECRBookSortButtonView *score;// 好评
@property (weak, nonatomic) IBOutlet UIView *filterContainer;

@end

@implementation ECRBookClassSortHeader

- (void)setRowModels:(NSArray *)rowModels{
    _rowModels = rowModels;
    self.stvc.dataArray = rowModels;
}

#pragma mark - ECRBookSortButtonViewDelegate
- (void)bsbView:(ECRBookSortButtonView *)view selected:(BOOL)selected{
    // 0销量,1价格,2好评论
    NSInteger type = 3;
    if (selected) {
        if ([view isEqual:self.sale]) {
            type = 0;
            self.price.selected = NO;
            self.score.selected = NO;
        }
        if ([view isEqual:self.price]) {
            type = 1;
            self.sale.selected = NO;
            self.score.selected = NO;
        }
        if ([view isEqual:self.score]) {
            type = 2;
            self.sale.selected = NO;
            self.price.selected = NO;

        }
    }
    if ([self.delegate respondsToSelector:@selector(bcsHeader:tag:)]) {
        [self.delegate bcsHeader:self tag:type];
    }
}

- (void)awakeFromNib{
    [super awakeFromNib];
//    self.contentView.backgroundColor = [UIColor whiteColor];
    self.sale.name = @"销量";
    self.price.name = @"价格";
    self.score.name = @"好评";
    self.sale.delegate = self;
    self.price.delegate = self;
    self.score.delegate = self;
    
    [self.filterContainer addSubview:self.stvc.view];
    [self.stvc.view mas_makeConstraints:^(MASConstraintMaker *make) {
        make.top.equalTo(self.filterContainer.mas_top);
        make.left.equalTo(self.filterContainer.mas_left);
        make.bottom.equalTo(self.filterContainer.mas_bottom);
        make.right.equalTo(self.filterContainer.mas_right);
    }];
}

- (ECRSortTableViewController *)stvc{
    if (_stvc == nil) {
        _stvc = [[ECRSortTableViewController alloc] init];
    }
    return _stvc;
}

@end
