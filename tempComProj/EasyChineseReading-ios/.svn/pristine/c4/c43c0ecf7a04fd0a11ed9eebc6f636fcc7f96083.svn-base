//
//  UOrderVC.m
//  EasyChineseReading-ios
//
//  Created by 赵春阳 on 17/8/30.
//  Copyright © 2017年 lee. All rights reserved.
//

#import "UserOrderVC.h"

#import "OrderRequest.h"

#import "UOrderListViewController.h"
#import "UserLeaseVC.h"

#import "ZSlideSwitch.h"

@interface UserOrderVC ()<ZSlideSwitchDelegate> 

@property (strong, nonatomic) ZSlideSwitch *slideSwitch;
@property (strong, nonatomic) UserLeaseVC *leaseVC;

@property (strong, nonatomic) UIButton *btnL;
@property (strong, nonatomic) UIButton *btnR;

@end

@implementation UserOrderVC

- (void)viewDidLoad {
    [super viewDidLoad];
    [self configMyOrderView];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}


#pragma mark -
#pragma mark 配置订阅界面

- (void)configMyOrderView
{
    self.title = @"我的订阅";
    self.view.backgroundColor = [UIColor whiteColor];
    
    UIView *topView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, Screen_Width, 44)];
    topView.backgroundColor = [UIColor whiteColor];
    
    _btnL = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, Screen_Width/2 - 1, 43)];
    [_btnL setTitle:@"图书" forState:UIControlStateNormal];
    [_btnL setTitleColor:[UIColor cm_blackColor_333333_1] forState:UIControlStateNormal];
    [_btnL setTitleColor:[UIColor cm_purpleColor_82056B_1] forState:UIControlStateSelected];
    [_btnL setBackgroundColor:[UIColor clearColor]];
    [_btnL addTarget:self action:@selector(selectedOrder) forControlEvents:UIControlEventTouchUpInside];
    [_btnL setSelected:YES];
    
    _btnR = [[UIButton alloc] initWithFrame:CGRectMake(Screen_Width/2, 0, Screen_Width/2, 43)];
    [_btnR setTitle:@"包月" forState:UIControlStateNormal];
    [_btnR setTitleColor:[UIColor cm_blackColor_333333_1] forState:UIControlStateNormal];
    [_btnR setTitleColor:[UIColor cm_purpleColor_82056B_1] forState:UIControlStateSelected];
    [_btnR setBackgroundColor:[UIColor clearColor]];
    [_btnR addTarget:self action:@selector(selectedLease) forControlEvents:UIControlEventTouchUpInside];
    
    UIView *lineView = [[UIView alloc] initWithFrame:CGRectMake(Screen_Width/2 - 1, 10, .5, 24)];
    lineView.backgroundColor = [UIColor cm_lineColor_E3E3E3_1];
    
    UIView *bLineView = [[UIView alloc] initWithFrame:CGRectMake(0, topView.height - 0.5, Screen_Width, 0.5)];
    bLineView.backgroundColor = [UIColor cm_lineColor_E3E3E3_1];
    
    [topView addSubview:_btnL];
    [topView addSubview:_btnR];
    [topView addSubview:lineView];
    [topView addSubview:bLineView];
    
    [self.view addSubview:topView];
    
    [self configLeaseView];
    [self configOrderView];
}

#pragma mark -
#pragma mark 查看订单 包月

- (void)selectedOrder
{
    [_btnL setSelected:YES];
    [_btnR setSelected:NO];
    [self.view bringSubviewToFront:_slideSwitch];
}

- (void)selectedLease
{
    [_btnL setSelected:NO];
    [_btnR setSelected:YES];
    [self.view bringSubviewToFront:_leaseVC.view];
}

#pragma mark -
#pragma mark 展示订单 包月

// 包月
- (void)configLeaseView {
    _leaseVC = [UserLeaseVC loadFromStoryBoard:@"User"];
    _leaseVC.view.frame = CGRectMake(0, 44, Screen_Width, self.view.height - 44);
    
    [self addChildViewController:_leaseVC];
    [self.view addSubview:_leaseVC.view];
}

// 订单
- (void)configOrderView {
    //要显示的标题
    NSArray *titles = @[@"全部", @"待付款", @"已付款"];
    //创建需要展示的ViewController
    NSMutableArray *viewControllers = [[NSMutableArray alloc] init];
    for (NSInteger i = 0 ; i<titles.count; i++) {
        UOrderListViewController *orderList = [UOrderListViewController new];
        [viewControllers addObject:orderList];
    }
    //创建滚动视图
    _slideSwitch = [[ZSlideSwitch alloc] initWithFrame:CGRectMake(0, 44, Screen_Width, self.view.height - 44) titles:titles viewControllers:viewControllers];
    //设置代理
    _slideSwitch.delegate = self;
    //设置按钮选中和未选中状态的标题颜色
    _slideSwitch.selectedColor = [UIColor cm_mainColor];
    _slideSwitch.normalColor = [UIColor cm_blackColor_333333_1];
    //显示方法
    [_slideSwitch showInViewController:self];
}

#pragma mark -
#pragma mark SlideSwitchDelegate

- (void)slideSwitchDidselectAtIndex:(NSInteger)index {
    NSLog(@"切换到了第 -- %zd -- 个视图",index);
}

@end
